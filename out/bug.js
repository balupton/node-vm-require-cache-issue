// Generated by CoffeeScript 1.3.3
(function() {
  var coffee, data, dataFile, dataString, fsUtil, vm;

  console.log("=== node vm require cache issue (with bug) ===");

  coffee = require('coffee-script');

  fsUtil = require('fs');

  vm = require('vm');

  dataFile = __dirname + '/../data.cson';

  dataString = fsUtil.readFileSync(dataFile).toString();

  data = vm.runInNewContext("require('coffee-script').eval(dataString)", {
    require: require,
    dataString: dataString
  });

  console.log('first pass:', data);

  dataString = fsUtil.readFileSync(dataFile).toString();

  data = vm.runInNewContext("require('coffee-script').eval(dataString)", {
    require: require,
    dataString: dataString
  });

  console.log('second pass:', data);

  console.log('\n');

}).call(this);
